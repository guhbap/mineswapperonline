/**
 * Генератор случайных названий из прилагательного и существительного
 * С учетом согласования по роду в русском языке
 */

// Прилагательные мужского рода
const adjectivesMasculine = [
  'зеленый', 'быстрый', 'тихий',
  'яркий', 'смелый', 'умный',
  'горячий', 'холодный',  'большой',
  'маленький', 'новый', 'старый',
  'красный', 'синий', 'желтый',
  'белый',  'черный', 'фиолетовый',
  'оранжевый', 'розовый', 'золотой',
  'серебряный', 'медный',  'железный',
  'деревянный', 'каменный', 'стеклянный',
  'пластиковый', 'металлический',  'мягкий',
  'твердый', 'гладкий', 'шершавый',
  'острый', 'тупой', 'легкий',
  'тяжелый',  'высокий', 'низкий',
  'широкий', 'узкий', 'длинный',
  'короткий', 'толстый', 'тонкий',
  'круглый', 'квадратный', 'треугольный',
  'прямой', 'кривой', 'ровный',
  'неровный',  'чистый', 'грязный',
  'светлый', 'темный', 'тусклый',
  'блестящий', 'матовый',  'шумный',
  'громкий', 'медленный', 'активный',
  'ленивый',  'веселый', 'грустный',
  'радостный', 'серьезный', 'смешной',
  'страшный', 'красивый', 'уродливый'
]

// Прилагательные женского рода
const adjectivesFeminine = [
  'зеленая', 'быстрая', 'тихая', 'яркая', 'смелая', 'умная', 'горячая', 'холодная',
  'большая', 'маленькая', 'новая', 'старая', 'красная', 'синяя', 'желтая', 'белая',
  'черная', 'фиолетовая', 'оранжевая', 'розовая', 'золотая', 'серебряная', 'медная',
  'железная', 'деревянная', 'каменная', 'стеклянная', 'пластиковая', 'металлическая',
  'мягкая', 'твердая', 'гладкая', 'шершавая', 'острая', 'тупая', 'легкая', 'тяжелая',
  'высокая', 'низкая', 'широкая', 'узкая', 'длинная', 'короткая', 'толстая', 'тонкая',
  'круглая', 'квадратная', 'треугольная', 'прямая', 'кривая', 'ровная', 'неровная',
  'чистая', 'грязная', 'светлая', 'темная', 'тусклая', 'блестящая', 'матовая',
  'шумная', 'громкая', 'медленная', 'активная', 'ленивая',
  'веселая', 'грустная', 'радостная', 'серьезная', 'смешная', 'страшная', 'красивая', 'уродливая'
]

// Прилагательные среднего рода
const adjectivesNeuter = [
  'зеленое', 'быстрое', 'тихое', 'яркое', 'смелое', 'умное', 'горячее', 'холодное',
  'большое', 'маленькое', 'новое', 'старое', 'красное', 'синее', 'желтое', 'белое',
  'черное', 'фиолетовое', 'оранжевое', 'розовое', 'золотое', 'серебряное', 'медное',
  'железное', 'деревянное', 'каменное', 'стеклянное', 'пластиковое', 'металлическое',
  'мягкое', 'твердое', 'гладкое', 'шершавое', 'острое', 'тупое', 'легкое', 'тяжелое',
  'высокое', 'низкое', 'широкое', 'узкое', 'длинное', 'короткое', 'толстое', 'тонкое',
  'круглое', 'квадратное', 'треугольное', 'прямое', 'кривое', 'ровное', 'неровное',
  'чистое', 'грязное', 'светлое', 'темное', 'тусклое', 'блестящее', 'матовое',
  'шумное', 'громкое', 'медленное', 'активное', 'ленивое',
  'веселое', 'грустное', 'радостное', 'серьезное', 'смешное', 'страшное', 'красивое', 'уродливое'
]

// Существительные с указанием рода: [существительное, род]
// род: 'm' - мужской, 'f' - женский, 'n' - средний
const nounsWithGender: Array<[string, 'm' | 'f' | 'n']> = [
  // Мужской род
  ['ромб', 'm'], ['ковёр', 'm'], ['стол', 'm'],
  ['стул', 'm'], ['дом', 'm'], ['дождь', 'm'],
  ['снег', 'm'], ['ветер', 'm'], ['огонь', 'm'],
  ['камень', 'm'], ['корень', 'm'], ['плод', 'm'],
  ['меч', 'm'], ['щит', 'm'], ['шлем', 'm'],
  ['лук', 'm'], ['топор', 'm'],   ['конверт', 'm'],
  ['молот', 'm'], ['корабль', 'm'], ['парус', 'm'],
  ['якорь', 'm'], ['руль', 'm'], ['флаг', 'm'],
  ['план', 'm'], ['ответ', 'm'], ['путь', 'm'],
  ['мост', 'm'], ['остров', 'm'], ['прилив', 'm'],
  ['холм', 'm'], ['лес', 'm'], ['сад', 'm'],
  ['парк', 'm'], ['зверь', 'm'], ['сквер', 'm'],
   ['пол', 'm'],

  // Женский род
  ['дверь', 'f'], ['стена', 'f'], ['книга', 'f'],
  ['ручка', 'f'], ['бумага', 'f'], ['звезда', 'f'],
  ['луна', 'f'], ['вода', 'f'], ['земля', 'f'],
  ['трава', 'f'], ['ветка', 'f'], ['птица', 'f'],
  ['рыба', 'f'], ['собака', 'f'], ['кошка', 'f'],
  ['лошадь', 'f'], ['корова', 'f'], ['овца', 'f'],
  ['коза', 'f'], ['кольчуга', 'f'], ['стрела', 'f'],
  ['лодка', 'f'], ['мачта', 'f'], ['палуба', 'f'],
  ['каюта', 'f'], ['мечта', 'f'], ['мысль', 'f'],
  ['идея', 'f'], ['цель', 'f'], ['задача', 'f'],
  ['проблема', 'f'], ['дорога', 'f'], ['тропа', 'f'],
  ['тропинка', 'f'], ['тропка', 'f'],['аллея', 'f'],
  ['улица', 'f'], ['площадь', 'f'], ['река', 'f'],
  ['волна', 'f'], ['гора', 'f'], ['долина', 'f'],
  ['роща', 'f'], ['поляна', 'f'], ['фраза', 'f'],

  // Средний род
  ['копье', 'n'],['окно', 'n'],
  ['потолок', 'm'], ['слово', 'n'], ['письмо', 'n'],
  ['солнце', 'n'],['облако', 'n'], ['дерево', 'n'],
  ['цветок', 'm'], ['лист', 'm'], ['семя', 'n'],
  ['решение', 'n'], ['озеро', 'n'], ['море', 'n'],
  ['берег', 'm'], ['поле', 'n'], ['луг', 'm'] // конверт - мужской род
]

/**
 * Определяет род существительного по окончанию
 * @param noun Существительное
 * @returns 'm' | 'f' | 'n'
 */
function detectGender(noun: string): 'm' | 'f' | 'n' {
  // Ищем в словаре
  const found = nounsWithGender.find(([n]) => n === noun)
  if (found) {
    return found[1]
  }

  // Эвристика по окончанию (не всегда точна, но для большинства случаев работает)
  const lastChar = noun[noun.length - 1]
  const lastTwoChars = noun.slice(-2)

  // Средний род: обычно оканчивается на -о, -е (но не всегда)
  if (lastChar === 'о' || lastChar === 'е') {
    // Исключения для мужского рода
    if (lastTwoChars === 'ок' || lastTwoChars === 'ек' || lastTwoChars === 'ик') {
      return 'm'
    }
    return 'n'
  }

  // Женский род: обычно оканчивается на -а, -я, -ь
  if (lastChar === 'а' || lastChar === 'я' || lastChar === 'ь') {
    // Исключения для мужского рода
    if (lastTwoChars === 'ок' || lastTwoChars === 'ек' || lastTwoChars === 'ик' || lastTwoChars === 'ак') {
      return 'm'
    }
    return 'f'
  }

  // По умолчанию мужской род
  return 'm'
}

/**
 * Генерирует случайное название из прилагательного и существительного
 * с правильным согласованием по роду
 * @returns Строка вида "зеленый ромб" или "зеленая книга"
 */
export function generateRandomName(): string {
  // Выбираем случайное существительное
  const nounIndex = Math.floor(Math.random() * nounsWithGender.length)
  const [noun, gender] = nounsWithGender[nounIndex]

  // Выбираем прилагательное соответствующего рода
  let adjective: string
  switch (gender) {
    case 'm':
      adjective = adjectivesMasculine[Math.floor(Math.random() * adjectivesMasculine.length)]
      break
    case 'f':
      adjective = adjectivesFeminine[Math.floor(Math.random() * adjectivesFeminine.length)]
      break
    case 'n':
      adjective = adjectivesNeuter[Math.floor(Math.random() * adjectivesNeuter.length)]
      break
  }

  return `${adjective} ${noun}`
}

